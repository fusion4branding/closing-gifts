<!doctype html>
<html lang="en">
<head>
    <!-- Favicon -->
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>D.R. Horton ‚Äî Gift Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --drh-navy:#182757; }
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>

  <!-- React (UMD) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
  // ================= CONFIG =================
  const ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbzfB6Jd53OKRYGbmnN0FMCW6xRkWp7B2nb-cQHGL9PTNJVYNsk5z4-MjVulh9PMVltc5Q/exec";
  const ADMIN_EMAIL  = "Hank@fusion4branding.com";
  const SITE_NAME    = "D.R. Horton ‚Äî Welcome Gift";
  const CALENDLY_URL = "https://calendly.com/hank-fusion4branding/30min";
  // ==========================================

  const { useMemo, useState } = React;

  // ---------- Helpers ----------
  const onlyDigits = s => (s || "").replace(/\D+/g, "");
  function formatPhone(s){
    const d = onlyDigits(s).slice(0,10);
    const a = d.slice(0,3), b = d.slice(3,6), c = d.slice(6,10);
    if(d.length <= 3) return a;
    if(d.length <= 6) return `(${a}) ${b}`;
    return `(${a}) ${b}-${c}`;
  }


// ---------- Images ----------
// ---------- Images ----------
const ProductImage = React.memo(function ProductImage({ id, alt, className }) {
  const base = `img/${id}`;
  const css =
    className ||
    'max-w-full max-h-full object-contain object-center select-none pointer-events-none';

  // Serve webp when available; fall back to png. Keep a lightweight onError
  // so png-only assets still show if webp 404s on some browsers/CDNs.
  return React.createElement('img', {
    alt,
    src: `${base}.webp`,
    srcSet: `${base}.webp, ${base}.png`,
    // The browser picks the first it can display; if webp 404s, fallback fires.
    onError: (e) => {
      const img = e.currentTarget;
      if (!img.dataset.fbk) {
        img.dataset.fbk = '1';
        img.src = `${base}.png`;
        img.srcset = ''; // prevent reselecting the bad webp
      }
    },
    className: css,
    draggable: false,
    decoding: 'async',
    loading: 'lazy'
  });
});



  // ---------- Catalog (master, unchanged) ----------
  const CATALOG_BASE = [

    { id:"gift_box_magnetic_15x12",     name:'15" √ó 12" Magnetic Gift Box (sold empty)',            base:13.00,  moq:100  },

    { id:"display_mailer_box_9_5x7_75x4",      name:'Display Mailer Box 9.5" √ó 7.75" √ó 4"',         base:4.00,  moq:100  },

    { id:"box_corrugated_large_black",  name:'Black Corrugated Large Box',                          base:5.99, moq:100 },

    { id:"urban_peak_mombo_backpack_cooler",     name:'Urban Peak Waterproof Mombo Backpack/Cooler',   base:55, moq:100  }
  ];

  const CATALOG_ADDITIONS = [
    { id:"yacht_club_boat_tote",        name:"Yacht Club Boat Tote ‚Äî 20.5\" √ó 13\" √ó 6.7\"",        base:17.00, moq:100  },

    { id:"nbn_whitby_24can_cooler",     name:"NBN Whitby 24-Can Backpack Cooler",                   base:30, moq:100  },
  
    { id:"deluxe_household_tool_set",   name:'Deluxe Household Tool Set (case)',                    base:49.99, moq:100 },

  // PROMO ITEMS
    { id:"teak_spoon_holder",           name:"Noble Teak Wood Spoon Holder",                        base:5.50,  moq:100 },
    { id:"icecream_pint_cooler",        name:"American-Made Full Color Ice Cream Pint Cooler",      base:4.50,  moq:100 },
    { id:"cutting_board_two_tone",      name:'11" Two-Tone Cutting Board',                          base:7.50,  moq:100 },
    { id:"tumbler_oasis_20oz",          name:'Oasis-II 20 oz Stainless Tumbler',                    base:8.50,  moq:100 },
    { id:"fleece_roll_blanket",         name:"Fleece Roll Up Blanket",                              base:9.00,  moq:100 },
  { id:'aeroloft_business_first_tech_organizer', name:'AeroLOFT¬Æ Business First Tech Organizer', base:9.00, moq:100, sku:'ALB-BT24' },
    { id:"screwdriver_artisan_20pc",    name:'Best Buddy Tools¬Æ Artisan Screwdriver Set (20-pc)',   base:9.50,  moq:100 },
  { id:'urban_peak_flashlight_fl206', name:'Rechargeable Urban Peak 20W/COB Flashlight', base:41.50, moq:100, sku:'FL206' },
    { id:"camp_mug_14oz",               name:'14 oz Powder-Coated Camping Mug',                     base:13.50, moq:100 },
    { id:"ceramic_bowl_candle_16oz",    name:"16 oz Ceramic Bowl Candle",                           base:14.75, moq:100 },
  { id:'humidifier_oil_diffuser_89500', name:'Humidifier w/ Essential Oil Diffuser', base:6.00, moq:100, sku:'89500' },
    { id:"humidifier_aroma_lightup",    name:'Aroma Light-Up Humidifier',                           base:21.00, moq:100 },
  { id:'senso_classic_wine_tumbler_10oz', name:'SENSO¬Æ Classic 10 oz Vacuum Insulated Wine Tumbler', base:11.00, moq:100, sku:'DSB-CW22' },
    { id:"mini_maglite_2aa",            name:'Mini Maglite¬Æ 2 ‚ÄúAA‚Äù Flashlight',                     base:25.00, moq:100 },
  { id:'rechargeable_milk_frother_wka_mf25', name:'Rechargeable Milk Frother', base:8.00, moq:100, sku:'WKA-MF25' },
  { id:'power_lynx_wireless_powerbank_98420', name:'Power Lynx Wireless Charging Power Bank', base:29.99, moq:100, sku:'98420' },
  { id:'blaze_digital_kitchen_scale_hw136ss', name:'Blaze Digital Kitchen Scale', base:11.00, moq:100, sku:'HW136SS' },
  { id:'hangtune_magnetic_speaker_44112', name:'HangTune Magnetic Wireless Speaker', base:42.95, moq:100, sku:'44112' },
  { id:'boomer_bamboo_speaker_t634', name:'Boomer Bamboo Wireless Speaker', base:19.99, moq:100, sku:'T634' },
  { id:'zippo_candle_lighter_40153', name:'Zippo¬Æ Candle Lighter', base:25.00, moq:100, sku:'40153' },
  { id:'thermacell_patio_shield_mrps', name:'Thermacell¬Æ Patio Shield Mosquito Repeller', base:37.50, moq:100, sku:'MRPS' },
];

  const CATALOG = [...CATALOG_BASE, ...CATALOG_ADDITIONS];

  // Exclude boxes/bags from Items picker
  const EXCLUDE_ITEM_IDS = new Set([
  'gift_box_magnetic_15x12',
  'display_mailer_box_9_5x7_75x4',
  'box_corrugated_large_black',
  'urban_peak_mombo_backpack_cooler',
  'nbn_whitby_24can_cooler',
  'yacht_club_boat_tote'
]);
      
  const ITEMS_FOR_PICKER = CATALOG.filter(it => !EXCLUDE_ITEM_IDS.has(it.id));

  // Pre-built sets
  const RECOMMENDED_SETS = [
    { id:'good',   label:'Good',   thumb:'reco_good',
      items:['tumbler_oasis_20oz','cutting_board_two_tone'] },
    { id:'better', label:'Better', thumb:'reco_better',
      items:['deluxe_household_tool_set'] },
    { id:'best',   label:'Best',   thumb:'reco_best',
      items:['nbn_whitby_24can_cooler','mini_maglite_2aa','camp_mug_14oz','rechargeable_milk_frother_wka_mf25','teak_spoon_holder'] },
  ];

  const SHORT_LABELS = {
    tumbler_oasis_20oz:"20 oz Tumbler", cutting_board_two_tone:"Cutting Board",
    deluxe_household_tool_set:"Household Tool Set",
    nbn_whitby_24can_cooler:"24-Can Cooler", mini_maglite_2aa:"Flashlight", camp_mug_14oz:"14 oz Mug", rechargeable_milk_frother_wka_mf25:"Milk Frother", teak_spoon_holder:"Teak Spoon Holder",
  };

  const BOX_TIERS = [
    { id:"starter",  name:"Starter Kit",  slots:3, pack:4.00, desc:"3 custom branded items + custom packaging (gift box or bag)" },
    { id:"standard", name:"Standard Kit", slots:4, pack:6.00, desc:"4 custom branded items + custom gift box (gift box or bag)" },
    { id:"premium",  name:"Premium Kit",  slots:5, pack:9.00, desc:"5 custom branded items + custom gift box (gift box or bag)" },
  ];

  // 2) Select Packaging ‚Äî unique key for selection; imageId reuses your Items filenames
const PACKAGING = [
  { key:'0BOXLARGE',  imageId:'gift_box_magnetic_15x12',        name:'15" W √ó 12" Magnetic Closure Gift Box',         price:13.00 },
  { key:'15-17219',   imageId:'display_mailer_box_9_5x7_75x4',  name:'Display Mailer Box 9.5" √ó 7.75" √ó 4"',          price:4.00  },
  { key:'GL2015-18',  imageId:'box_corrugated_large_black',     name:'Brown Corrugated Large Box',                     price:5.99  },

  // Bags shown as single-select packaging as requested:
  { key:'CB185',      imageId:'urban_peak_mombo_backpack_cooler', name:'Urban Peak Waterproof Mombo Backpack/Cooler',  price:55.00 },
  { key:'3950-04',    imageId:'nbn_whitby_24can_cooler',          name:'NBN Whitby 24 Can Backpack Cooler',            price:30.00 },
  { key:'QSB141',     imageId:'yacht_club_boat_tote',             name:'Yacht Club Large Boat Tote ‚Äì 24" √ó 14.17" √ó 6.7"', price:17.00 }
];


      // ---------- Preview grid (memoized to avoid flicker while typing) ----------
const PreviewGrid = React.memo(function PreviewGrid({ tierSlots, selected, catalog }) {
  const previewColsClass = tierSlots === 4 ? 'grid-cols-2' : 'grid-cols-3';
  const centerGrid       = tierSlots === 4 ? '' : 'place-content-center';

  return React.createElement(
    'div',
    { className: 'mt-4 aspect-square rounded-2xl bg-slate-100 p-4' },
    React.createElement(
      'div',
      { className: `h-full w-full rounded-xl border-2 border-dashed border-slate-300 grid ${previewColsClass} ${centerGrid} gap-3 p-3` },
      Array.from({ length: tierSlots }).map((_, idx) => {
        const id   = selected[idx];
        const item = id ? catalog.find(i => i.id === id) : null;
        const nodeKey = id ? `slot-${idx}-${id}` : `slot-empty-${idx}`;

        return React.createElement(
          'div',
          { key: nodeKey, className: 'rounded-xl border border-slate-200 bg-white p-2 grid grid-rows-[1fr_auto] justify-items-stretch' },
          id && item
            ? React.createElement(
                React.Fragment,
                null,
                React.createElement(
                  'div',
                  { className: 'w-full aspect-[4/3] rounded-md bg-white flex items-center justify-center overflow-hidden' },
                  React.createElement(ProductImage, { id: item.id, alt: item.name })
                ),
                React.createElement(
                  'div',
                  { className: 'mt-1 text-[11px] text-center text-slate-600 truncate', title: item.name },
                  item.name
                )
              )
            : React.createElement('div', { className: 'h-full grid place-items-center text-xs text-slate-400' }, 'Empty Slot')
        );
      })
    ),
    React.createElement('div', { className: 'mt-2 text-center text-xs text-slate-600' }, 'D.R. Horton Logo')
  );
});

      // ---------- Pre-built Set card (memoized & OUTSIDE App to prevent remounts) ----------
const SetCard = React.memo(function SetCard({ setDef, selected, catalog, onChoose }) {
  const first   = catalog.find(i => i.id === setDef.items[0]);
  const thumbId = setDef.thumb || (first ? first.id : null);

  const active = selected.length === setDef.items.length &&
                 setDef.items.every(id => selected.includes(id));

  const shortItems = setDef.items.map(
    id => SHORT_LABELS[id] || (catalog.find(i=>i.id===id)?.name ?? id)
  );

  return React.createElement('button', {
    onClick: () => onChoose(setDef),
    className:
      `group rounded-2xl border p-6 text-left transition bg-white w-full
       ${active ? 'border-[var(--drh-navy)] ring-2 ring-[var(--drh-navy)]' : 'border-slate-200 hover:shadow-md'}`
  },
    React.createElement('div', { className:'grid grid-cols-[auto_1fr] gap-5 items-start' },
      React.createElement('div', { className:'flex items-center gap-4 min-w-0' },
        React.createElement('div', { className:'h-16 w-16 md:h-20 md:w-20 rounded-xl bg-white ring-1 ring-slate-200 grid place-items-center overflow-hidden shrink-0' },
          thumbId
            ? React.createElement(ProductImage, { id:thumbId, alt:setDef.label+' set' })
            : React.createElement('div',{className:'w-14 h-14 rounded-lg bg-slate-300'})
        ),
        React.createElement('div', { className:'min-w-0' },
          React.createElement('div', { className:'text-lg md:text-xl font-semibold leading-tight' }, setDef.label),
          React.createElement('div', { className:'text-xs text-slate-500' }, `${setDef.items.length} items`)
        )
      ),
      React.createElement('ul', { className:'list-disc pl-5 text-[12px] leading-5 text-slate-700 space-y-0.5' },
        shortItems.map((label, idx) =>
          React.createElement('li', { key: setDef.id + '-li-' + idx }, label)
        )
      )
    )
  );
});

  // ---------- App ----------
  function App(){
    const [tier,setTier]           = useState(BOX_TIERS[1]);
    const [selected,setSelected]   = useState([]);
    const [selectedPack,setPack]   = useState(null); // stores PACKAGING.key
    const [qty,setQty]             = useState(100);
    const [division,setDivision]   = useState('');
    const [name,setName]           = useState('');
    const [email,setEmail]         = useState('');
    const [phone,setPhone]         = useState('');
    const [sending,setSending]     = useState(false);
    const [error,setError]         = useState('');

    const remaining = tier.slots - selected.length;

    const priceEach = useMemo(()=>{
      const items = selected.map(id => CATALOG.find(i=>i.id===id));
      const itemSum = items.reduce((s,i)=> s + (i?.base ?? 0), 0);
      return (items.length>0) ? itemSum.toFixed(2) : '0.00';
    },[selected]);

    function toggle(id){
      setSelected(prev =>
        prev.includes(id) ? prev.filter(x => x !== id)
                          : (prev.length < tier.slots ? [...prev, id] : prev)
      );
    }

    function chooseSet(set) {
      const items = set.items.slice(0, set.items.length);
      const t = BOX_TIERS.find(x => x.slots === items.length) || tier;
      setTier(t);
      setSelected(items);
    }

    function onTierClick(b){
      setTier(b);
      setSelected([]);
    }



    const previewColsClass = tier.slots === 4 ? 'grid-cols-2' : 'grid-cols-3';
    const centerGrid       = tier.slots === 4 ? '' : 'place-content-center';

    async function submit(){
      setError('');
      if(!name.trim()){ setError('Please enter your First & Last Name.'); return; }
      if(!division.trim()){ setError('Please enter your Division.'); return; }
      if(!email.trim()){ setError('Please enter a contact email.'); return; }
      if(!selectedPack){ setError('Please select a packaging option.'); return; }
      if(selected.length === 0){ setError('Please select at least one item.'); return; }

      setSending(true);

      const packObj = PACKAGING.find(p=>p.key===selectedPack);

      const payload = {
        admin: ADMIN_EMAIL,
        site: SITE_NAME,
        submittedAt: new Date().toISOString(),
        name,
        division,
        email: email.trim(),
        phone: phone ? formatPhone(phone) : '',
        tier: { id:tier.id, name:tier.name, slots:tier.slots, pack:tier.pack },
        qty, priceEach,
        packaging: packObj ? { sku: packObj.key, id: packObj.imageId, name: packObj.name } : null,
        items: selected.map(id => {
          const i = CATALOG.find(x=>x.id===id)||{};
          return { id, name:i.name || id, unitPrice:i.base };
        }),
      };

      try{
        const res = await fetch(ENDPOINT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain' },
          body: JSON.stringify(payload),
        });
        const txt = await res.text();
        if(!res.ok) throw new Error('Server '+res.status+': '+txt);
        window.location.href = '../thankyou/';
      }catch(err){
        console.error(err);
        setError('Checkout failed. '+String(err).slice(0,300));
      }finally{
        setSending(false);
      }
    }

    // ---------- UI ----------
    return React.createElement(React.Fragment, null,
      // Header
      React.createElement('header',{className:'sticky top-0 z-30 bg-[var(--drh-navy)] text-white'},
        React.createElement('div',{className:'max-w-6xl mx-auto px-4 py-4 flex items-center justify-between'},
          React.createElement('a',{ href: '../', className:'flex items-center' },
            React.createElement('img',{ src:'img/drh-logo-white.png', alt:'D.R. Horton', className:'h-12 md:h-14 w-auto select-none', decoding:'async', loading:'eager' })
          ),
          React.createElement('div',{className:'flex items-center gap-6 text-sm'},
            React.createElement('div',null,
              React.createElement('div',{className:'text-white/80'},'Estimate / ea'),
              React.createElement('div',{className:'text-lg font-semibold'}, '$'+priceEach)
            ),
            React.createElement('div',null,
              React.createElement('div',{className:'text-white/80'},'Order Qty'),
              React.createElement('div',{className:'text-lg font-semibold'},qty)
            )
          )
        )
      ),

      // Main
      React.createElement('main',{className:'max-w-6xl mx-auto px-4 py-6 grid lg:grid-cols-5 gap-6'},

        // Pre-built sets + handoff
        React.createElement('div', { className:'lg:col-span-5' },
          React.createElement('h2', { className:'text-2xl md:text-3xl font-semibold text-[var(--drh-navy)] text-center mb-4' }, "Hank‚Äôs Pre-Built Sets"),
          React.createElement('div', { className:'max-w-5xl mx-auto grid grid-cols-[repeat(auto-fit,minmax(220px,1fr))] gap-4' },
RECOMMENDED_SETS.map(s =>
  React.createElement(SetCard, {
    key: s.id,
    setDef: s,
    selected,
    catalog: CATALOG,
    onChoose: chooseSet
  })
)

          ),
          React.createElement('div',{className:'max-w-5xl mx-auto mt-3 mb-6 text-center text-sm text-slate-700'},
            'Not seeing what you need? ',
            React.createElement('a',{href:CALENDLY_URL, target:'_blank', rel:'noopener', className:'text-[var(--drh-navy)] underline font-semibold'},'Talk to Hank')
          ),
          React.createElement('h2', { className:'text-2xl md:text-3xl font-semibold text-[var(--drh-navy)] text-center' }, 'Create Your Own Kit')
        ),

        <!-- Left column -->
        React.createElement('section',{className:'lg:col-span-3 space-y-6'},

          // 1) Select kit
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('div',{className:'flex items-start justify-between'},
              React.createElement('div',null,
                React.createElement('h2',{className:'text-lg font-semibold'},'1) Select Kit'),
                React.createElement('p',{className:'text-sm text-slate-500'},'Pick a tier, choose items, and set your quantity.')
              ),
              React.createElement('button',{onClick:()=>{setTier(BOX_TIERS[1]); setSelected([]); setPack(null);},className:'text-sm px-3 py-1.5 rounded-lg border border-slate-300 hover:bg-slate-50'},'Reset')
            ),
            React.createElement('div',{className:'mt-4 grid md:grid-cols-3 gap-3'},
              BOX_TIERS.map(b => React.createElement('button',{
                  key:b.id,
                  onClick:()=>onTierClick(b),
                  className:`relative rounded-2xl border p-4 text-left transition hover:shadow ${tier.id===b.id?'border-[var(--drh-navy)] ring-1 ring-[var(--drh-navy)]':'border-slate-200'}`
                },
                React.createElement('div',{className:'h-8 w-8 rounded-xl bg-[var(--drh-navy)] grid place-items-center text-white mb-2'},'üì¶'),
                React.createElement('div',{className:'font-medium'},b.name),
                React.createElement('div',{className:'text-xs text-slate-500 leading-snug'}, b.desc),
                tier.id===b.id && React.createElement('span',{className:'absolute top-3 right-3 text-emerald-600'},'‚úî')
              ))
            ),
            React.createElement('div',{className:'mt-4 grid sm:grid-cols-3 gap-3'},
              React.createElement('label',{className:'block col-span-3 sm:col-span-1'},
                React.createElement('span',{className:'text-xs text-slate-500'},'Division (required)'),
                React.createElement('input',{value:division,placeholder:'e.g., North Dallas',onChange:e=>setDivision(e.target.value),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2'})
              ),
              React.createElement('label',{className:'block'},
                React.createElement('span',{className:'text-xs text-slate-500'},'Order Quantity'),
                React.createElement('input',{
                  type:'number', min:100, step:50, value:qty,
                  onChange:e=>{
                    const v = parseInt(e.target.value || 0, 10);
                    const next = isNaN(v) ? 100 : Math.max(100, v - (v % 50));
                    setQty(next);
                  },
                  className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--drh-navy)]'
                })
              ),
              React.createElement('div',{className:'rounded-xl bg-slate-100 p-3 text-sm'},
                React.createElement('div',{className:'flex items-center gap-2'},'‚ÑπÔ∏è','Remaining Slots'),
                React.createElement('div',{className:`mt-1 text-lg font-semibold ${remaining<0?'text-rose-600':''}`}, remaining>=0?remaining:0)
              )
            ),
            React.createElement('p',{className:'mt-2 text-xs text-slate-600'},
              'Need a different quantity? ',
              React.createElement('a',{href:CALENDLY_URL, target:'_blank', rel:'noopener', className:'text-[var(--drh-navy)] underline'},'Talk to Hank')
            )
          ),

          // 2) Select Packaging (single-select)
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'2) Select Packaging Option'),
            React.createElement('p',{className:'text-sm text-slate-500'},'Choose one packaging option.'),
            React.createElement('div',{className:'mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-4'},
              PACKAGING.map(p => {
                const active = selectedPack === p.key;
                return React.createElement('button',{
                  key:p.key, onClick:()=>setPack(prev => prev===p.key ? null : p.key),
                  className:`group rounded-2xl border p-4 text-left transition ${active?'border-[var(--drh-navy)] ring-1 ring-[var(--drh-navy)] shadow':'border-slate-200 hover:shadow'}`
                },
                  React.createElement('div',{className:'aspect-[4/3] w-full rounded-xl bg-white grid place-items-center overflow-hidden'},
                    React.createElement(ProductImage,{ id:p.imageId, alt:p.name })
                  ),
React.createElement('div',{className:'mt-2 font-medium'}, p.name),
React.createElement('div',{className:'text-sm text-slate-600'}, `$${p.price.toFixed(2)}`),
React.createElement('div',{className:'text-xs text-slate-500 mt-0.5'}, p.key),
                  active && React.createElement('div',{className:'mt-1 text-xs text-emerald-700 font-medium'},'Selected')
                );
              })
            )
          ),

          // 3) Select items ‚Äî boxes/bags removed
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'3) Select Items'),
            React.createElement('p',{className:'text-sm text-slate-500'},'Sorted by price (lowest to highest).'),
            React.createElement('div',{className:'mt-4 max-h-[60vh] overflow-y-auto pr-1'},
              React.createElement('div',{className:'grid sm:grid-cols-2 lg:grid-cols-3 gap-4'},
                ITEMS_FOR_PICKER
                  .slice()
                  .sort((a,b)=> a.base===b.base ? a.name.localeCompare(b.name) : a.base-b.base)
                  .map(item => {
                    const active   = selected.includes(item.id);
                    const disabled = !active && selected.length >= tier.slots;
                    return React.createElement('button',{
                        key:item.id, onClick:()=>toggle(item.id),
                        className:`group rounded-2xl border p-4 text-left transition ${active?'border-[var(--drh-navy)] ring-1 ring-[var(--drh-navy)] shadow':'border-slate-200 hover:shadow'} ${disabled?'opacity-40 pointer-events-none':''}`
                      },
                      React.createElement('div',{className:'relative'},
                        React.createElement('div',{className:'aspect-[4/3] w-full rounded-xl bg-white flex items-center justify-center overflow-hidden'},
                          React.createElement(ProductImage, { id:item.id, alt:item.name })
                        ),
                        active && React.createElement('span',{className:'absolute -top-2 -right-2 h-7 w-7 rounded-full bg-[var(--drh-navy)] text-white grid place-items-center'},'‚úî')
                      ),
                      React.createElement('div',{className:'mt-3 font-medium'},item.name),
                      React.createElement('div',{className:'mt-1 text-sm'},'$'+item.base.toFixed(2))
                    );
                  })
              )
            )
          )
        ),

        // Right column
        React.createElement('section',{className:'lg:col-span-2 space-y-6'},


// 4) Preview
React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
  React.createElement('h2',{className:'text-lg font-semibold'},'4) Preview your full project'),
  React.createElement(PreviewGrid, { tierSlots: tier.slots, selected, catalog: CATALOG })
),


          // 5) Summary
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'5) Summary'),
            React.createElement('div',{className:'mt-2 space-y-2 text-sm'},
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Box Tier'),React.createElement('span',{className:'font-medium'},tier.name)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Items Selected'),React.createElement('span',{className:'font-medium'},selected.length,' / ',tier.slots)),
(() => {
  const p = PACKAGING.find(x => x.key === selectedPack);
  return React.createElement(
    React.Fragment,
    null,
    React.createElement('div', { className:'flex items-center justify-between' },
      React.createElement('span', null, 'Selected Packaging'),
      React.createElement('span', { className:'font-medium' }, p ? `${p.name} ‚Ä¢ ${p.key}` : 'None')
    ),
    React.createElement('div', { className:'flex items-center justify-between' },
      React.createElement('span', null, 'Packaging Price / ea'),
      React.createElement('span', { className:'font-medium' }, p ? `$${p.price.toFixed(2)}` : '‚Äî')
    )
  );
})(),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Estimated Price / ea (items only)'),React.createElement('span',{className:'font-semibold'}, '$'+priceEach)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Flat Kitting Rate'),React.createElement('span',{className:'font-medium'},'$5.00')),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Order Qty'),React.createElement('span',{className:'font-medium'},qty))
            ),
            React.createElement('p',{className:'mt-2 text-xs text-slate-600'},
              'Prices are estimates for planning purposes and may change based on final specs, branding, and packaging.'
            ),
            React.createElement('div',{className:'mt-4 grid gap-3'},
              React.createElement('label',{className:'block'},
                React.createElement('span',{className:'text-xs text-slate-500'},'First & Last Name (required)'),
                React.createElement('input',{type:'text',placeholder:'Your name',value:name,onChange:e=>setName(e.target.value),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--drh-navy)]'})
              ),
              React.createElement('label',{className:'block'},
                React.createElement('span',{className:'text-xs text-slate-500'},'Contact Email (required)'),
                React.createElement('input',{type:'email',placeholder:'you@company.com',value:email,onChange:e=>setEmail(e.target.value),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--drh-navy)]'})
              ),
              React.createElement('label',{className:'block'},
                React.createElement('span',{className:'text-xs text-slate-500'},'Phone (optional)'),
                React.createElement('input',{
                  type:'tel', inputMode:'numeric', placeholder:'(555) 555-5555',
                  value:phone,
                  onChange:e=>setPhone(formatPhone(e.target.value)),
                  onKeyDown:e=>{
                    const ok = ['Backspace','Delete','ArrowLeft','ArrowRight','Home','End','Tab'].includes(e.key) || /\d/.test(e.key);
                    if(!ok) e.preventDefault();
                  },
                  className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--drh-navy)]'
                })
              ),
              React.createElement('button',{
                  onClick:submit,
                  disabled:sending,
                  className:`px-4 py-2 rounded-xl text-white ${sending?'bg-slate-400':'bg-[var(--drh-navy)] hover:opacity-90'}`
                },
                sending ? 'Processing‚Ä¶' : 'Checkout'
              ),
              error && React.createElement('div',{className:'text-rose-600 text-sm'},error)
            )
          )
        )
      ),

      // Footer
      React.createElement('footer',{className:'border-t mt-10 bg-white'},
        React.createElement('div',{className:'max-w-6xl mx-auto px-4 py-8 text-center text-slate-500 text-sm'},
          `¬© ${new Date().getFullYear()} Fusion4Branding ‚Ä¢ Closing Gifts`
        )
      )
    ); // end return
  }

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(React.createElement(App));
  </script>
</body>
</html>
